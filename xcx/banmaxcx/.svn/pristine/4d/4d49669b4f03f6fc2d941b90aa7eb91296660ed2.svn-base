// guide/activity.js
const Page = require('../utils/ald-stat.js').Page;
const bm = require('../utils/common.js')
const app = getApp();
Page({

  /**
   * 页面的初始数据
   */
  data: {
    bg_img: '',
    but_img: '',
    conts_img: '', 
    but_url: ''
  },
  getUrl: function(tk, act_id) {
    var that = this;
    bm.requsetData("/c/guide/transfer", "get", {
      access_token: tk,
      id: act_id
    }, function(data) {
      console.log(data);
      var array = data.data.data;
      if (data.data.errcode == 0) {
        that.setData({
          bg_img: array.bg_img,
          but_img: array.but_img,
          conts_img: array.conts_img,
          but_url: array.but_url
        })
        // 跳转
      }else{
        wx.showToast({
          mask: true,
          title: data.data.errmsg,
          duration: 1000
        })
      }
    })
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function(options) {
    var that = this;
    var tk = app.globalData.token;
    var act_id = app.globalData.act_id;
    if (act_id>0){
      that.getUrl(tk, act_id);
    }else{
      wx.navigateTo({
        url: '/pages/login/loading?act_id=1',
      })
    }
  },
  clickGet:function(){
    var that=this;
    wx.navigateTo({
      url: that.data.but_url,
    })
  },
  understandbm:function(){
    wx.navigateTo({
      url:'/help/problem',
    })
  }

})